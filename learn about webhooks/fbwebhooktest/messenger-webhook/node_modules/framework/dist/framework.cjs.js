function e(e){return e&&'object'==typeof e&&'default'in e?e:{default:e}}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((t=>Object.getOwnPropertyDescriptor(e,t).enumerable))),r.push.apply(r,o)}return r}function r(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?t(Object(a),1).forEach((t=>{o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((t=>{Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:1,configurable:1,writable:1}):e[t]=r,e}function a(e){return e[f]}Object.defineProperty(exports,'__esModule',{value:1});var n=require('@loadable/component'),i=require('react-router-config'),effector=require('effector'),s=require('patronum'),c=require('history'),u=e(n);const d=effector.createDomain('framework/default',{name:"defaultDomain",sid:"-tzcbvc"}),f='framework/page-hatch';Object.defineProperty(exports,'loadable',{enumerable:1,get:()=>u.default}),exports.contract=e=>{for(const t in e.page){const r=e.page[t],o=e.model[t];r&&o&&effector.is.unit(r)&&effector.is.unit(o)&&(effector.is.store(r,{sid:"xrdgy2"})&&effector.is.store(o,{sid:"xrdih6"})?(effector.forward({ɔ:{from:o,to:r},config:{sid:"m1otzj"}}),r.defaultState=o.defaultState,r.stateRef.current=o.stateRef.current,r.stateRef.before=[{type:'map',fn:e=>e,from:o.stateRef}]):effector.forward({ɔ:{from:r,to:o},config:{sid:"n1fgk0"}}))}},exports.createBrowserApplication=e=>{const t=e.domain||d,o=(e=>{const t='undefined'!=typeof document?c.createBrowserHistory():null,r=e.createEffect({name:"historyPush",sid:"o1x4sa"}),o=e.createEffect({name:"historyPushSearch",sid:"xiuw4b"}),a=e.createEffect({name:"historyReplace",sid:"-qrkbw9"}),n=e.createEvent({name:"historyChanged",sid:"oxh1xh"}),i=e.createEvent({name:"historyEmitCurrent",sid:"m2f96k"});return'test'!==process.env.NODE_ENV&&(r.use((e=>null==t?void 0:t.push(e))),a.use((e=>null==t?void 0:t.replace(e))),o.use((e=>null==t?void 0:t.push({search:e}))),null==t||t.listen((({pathname:e,search:t,hash:r},o)=>{n({pathname:e,search:t,hash:r,action:o})})),effector.sample({ɔ:[{source:i,fn:()=>({action:'REPLACE',hash:null==t?void 0:t.location.hash,pathname:null==t?void 0:t.location.pathname,search:null==t?void 0:t.location.search}),target:n}],config:{sid:"kzz792"}})),{history:t,historyPush:r,historyPushSearch:o,historyReplace:a,historyChanged:n,historyEmitCurrent:i}})(t);effector.forward({ɔ:{from:e.ready,to:o.historyEmitCurrent},config:{sid:"a2fxhi"}});const n=o.historyChanged.filterMap((t=>{const o=i.matchRoutes(e.routes,t.pathname);if(o.length>0)return r(r({},o[0]),{},{change:t})}));for(const{component:r,path:o}of e.routes){if(!r)return;const{routeMatched:e,__:i}=s.splitMap({source:n,cases:{routeMatched:({route:e,match:t,change:r})=>{if(e.path===o)return{params:t.params,query:Object.fromEntries(new URLSearchParams(r.search))}}}}),c=t.createEvent({name:"hatchEnter",sid:"-v65ud0"}),u=t.createEvent({name:"hatchUpdate",sid:"2pt9rt"}),d=t.createEvent({name:"hatchExit",sid:"9jqgv9"}),f=t.createEvent({name:"dontNeedLoadChunk",sid:"-nsb40i"}),p=t.createStore(0,{name:"$chunkLoaded",sid:"-4kqdl4"}),h=t.createStore(void 0!==a(r),{name:"$hasHatch",sid:"fjkblq"}),l=t.createEffect((async()=>{const e=r.load;if('function'==typeof e){const t=await e();return t.default?t.default:(console.info(`Not found default export for "${o}" route`),null)}return r}),{name:"loadPageFx",sid:"-qstag2"}),m=t.createEffect((e=>{const t=a(e);return t?(effector.forward({ɔ:{from:c,to:t.enter},config:{sid:"cw5veh"}}),effector.forward({ɔ:{from:u,to:t.update},config:{sid:"cwpnzu"}}),effector.forward({ɔ:{from:d,to:t.exit},config:{sid:"cx9gl7"}}),1):0}),{name:"setupHatchLinksFx",sid:"-rikxkp"}),g=t.createStore(0,{name:"$onRoute",sid:"wfxrk6"}).on(e,(()=>1)).on(i,(()=>0)),y=t.createStore(0,{name:"$onPage",sid:"hfkz8f"}).on(c,(()=>1)).on(d,(()=>0));p.on(l.done,(()=>1)).on(f,(()=>1)),h.on(m.doneData,((e,t)=>t)),effector.guard({ɔ:[{source:e,filter:effector.combine({ɔ:[h,p,(e,t)=>!e&&!t],config:{name:"filter",sid:"tg5siz"}}),target:l}],config:{sid:"oqwhym"}}),effector.guard({ɔ:[{source:l.doneData,filter:e=>null!==e,target:m}],config:{sid:"p8hwy6"}}),effector.guard({ɔ:[{source:e,filter:effector.combine({ɔ:[h,p,(e,t)=>e&&!t],config:{name:"filter",sid:"-cp7bea"}}),target:[m.prepend((()=>r)),f]}],config:{sid:"pofy5n"}}),effector.guard({ɔ:[{source:e,clock:m.doneData,filter:g,target:c}],config:{sid:"psuawj"}}),effector.guard({ɔ:[{source:e,filter:y,target:u}],config:{sid:"q88jin"}}),effector.guard({ɔ:[{source:i,filter:y,target:d}],config:{sid:"qnms4r"}})}return{navigation:o}},exports.createHatch=(e=d)=>{const t=e.createStore(0,{name:"$opened",sid:"-5kdggg"}),r=e.createStore({},{name:"$params",sid:"-lt6ylq"}),o=e.createStore({},{name:"$query",sid:"-ttwijs"}),a={enter:e.createEvent({name:"enter",sid:"-tugzqm"}),update:e.createEvent({name:"update",sid:"rhre0v"}),exit:e.createEvent({name:"exit",sid:"-q61tqt"}),$opened:t,$params:r,$query:o,$props:effector.combine({ɔ:[{params:r,query:o}],config:{name:"$props",sid:"ld17jr"}})};return r.on([a.enter,a.update],((e,{params:t})=>t)),o.on([a.enter,a.update],((e,{query:t})=>t)),a.$opened.on(a.enter,(()=>1)).on(a.exit,(()=>0)),a},exports.createPages=e=>i.renderRoutes(e),exports.getHatch=a,exports.lookupHatch=e=>{if(e.route.component)return a(e.route.component)},exports.withHatch=(e,t)=>(t[f]=e,t);
//# sourceMappingURL=framework.cjs.js.map
